import{r as n,j as e}from"./react-C0JOplFJ.js";import{R as We}from"./react-dom-CqXdU6rh.js";import{u as Je,B as Ve}from"./react-router-dom-DDEld2U6.js";import{n as P,_ as v,I as Ke}from"./react-hot-toast-CSyfbE95.js";import{u as Xe,G as Qe}from"./@react-oauth-DTzcgrkO.js";import{l as Ze}from"./socket.io-client-pgtUPCnp.js";import{L as et,a as le,b as tt,c as st,P as rt,M as ot,R as nt,A as at,d as it,e as Ce,f as Ee,T as lt,B as ct,g as Se,F as dt,h as ut,I as mt,G as pt,i as ht,j as ft,k as gt,l as xt,m as bt,n as wt,o as yt,p as vt,q as Nt}from"./react-icons-DNJWuuEK.js";import{m as R,A as jt}from"./framer-motion-DWKON2yR.js";import{v as G}from"./uuid-CtRu48qb.js";import{a as A}from"./axios-BtuGy7By.js";import{F as Ct}from"./file-saver-Djip2q1l.js";import{J as Et}from"./jszip-CtSIKovu.js";import{M as St}from"./react-markdown-jH1aUftD.js";import{h as kt,d as Dt}from"./react-syntax-highlighter-DiSsqK0z.js";import{I as It}from"./vscode-icons-js-Chox8ZBA.js";import{I as ke}from"./@iconify-zFJnPiHX.js";import{c as $}from"./classnames-C5re8Ct7.js";import{l as De}from"./lang-map-nLg5Kdxm.js";import{x as Rt,a as Lt,w as Tt,b as Pt,v as At,t as Ot,c as Ft,d as Ut,e as zt,s as _t,f as Mt,g as Gt,r as Ht,q as $t,o as qt,n as Bt,h as Yt,m as Wt,i as Jt,j as Vt,k as Kt,l as Xt,p as Qt,u as Zt,y as es,z as ts,A as ss,B as rs,C as os,D as ns,E as as,F as is,G as ls,H as cs,I as ds,J as us,K as ms,L as ps,M as hs,N as fs,O as gs,P as xs,Q as bs,R as ws,S as ys,T as vs,U as Ns,V as js}from"./@uiw-BHH1nj_4.js";import{A as Cs}from"./react-avatar-C7zsmaTv.js";import{a as q,b as Es,u as Ie,c as Ss,d as V}from"./react-router-veBPla2P.js";import{S as ks}from"./react-split-CyJlspd4.js";import{M as Re}from"./react-tooltip-DEIaoqXy.js";import{T as Ds}from"./tldraw-pbfXqsY2.js";import{u as Is}from"./@tldraw-DPVKUOq8.js";import"./lodash.isequal-CWPzDpkQ.js";import"./lodash.throttle-yuuEgjvB.js";import"./idb-Bn1DMRyg.js";import"./lodash.uniq-BHEsPF9E.js";import"./core-js-Dkw2Z0CP.js";import"./lz-string-CzHELm9r.js";import"./hotkeys-js-BfWqkGRU.js";import{E as Rs,bV as Ls,bW as Ts,bX as Ps}from"./@codemirror-DpmaQCQz.js";import{s as be}from"./screenfull-DmVOzVZz.js";import{E as ae,a as ie}from"./lucide-react-7zFe_D2k.js";import"./charenc-CI8Jn5z4.js";import"./scheduler-C323NY8X.js";import"./@remix-run-DaH1AUis.js";import"./goober-vt3s6TGe.js";import"./engine.io-client-DBBxzneW.js";import"./engine.io-parser-BiEtp6m2.js";import"./@socket.io-Dkula2eQ.js";import"./socket.io-parser-BBkuslX-.js";import"./motion-dom-DnIdl6pN.js";import"./motion-utils-BDWe_Wef.js";import"./devlop-Cl3hj7Sz.js";import"./unified-BW-7GApn.js";import"./bail-FqpXQuLt.js";import"./extend-D1C0LVzC.js";import"./is-plain-obj-C1gvLhAf.js";import"./trough-B_b8ryxu.js";import"./vfile-tbz-BywF.js";import"./vfile-message-Bq256rVA.js";import"./unist-util-stringify-position-Ch_qCilz.js";import"./remark-parse-C8jcMe6G.js";import"./mdast-util-from-markdown-CgCUhJTR.js";import"./micromark-util-decode-numeric-character-reference-CNs1qBpV.js";import"./micromark-util-decode-string-strjl-tx.js";import"./decode-named-character-reference-C3-224fz.js";import"./micromark-util-normalize-identifier-C9ANKk3v.js";import"./micromark-DhRKOnvZ.js";import"./micromark-util-combine-extensions-Bka6Sc1c.js";import"./micromark-util-chunked-DrRIdSP-.js";import"./micromark-factory-space-CA-Wq7KA.js";import"./micromark-util-character-Ch8j4vtg.js";import"./micromark-core-commonmark-CDnWrFBr.js";import"./micromark-util-classify-character-GCpR5yWH.js";import"./micromark-util-resolve-all-PQCKh0dx.js";import"./micromark-util-subtokenize-BC4BSQ9J.js";import"./micromark-factory-destination-CkgxUJuk.js";import"./micromark-factory-label-U15tx9Nh.js";import"./micromark-factory-title-reCpaPbc.js";import"./micromark-factory-whitespace-_v4v79HM.js";import"./micromark-util-html-tag-name-DbKNfynz.js";import"./mdast-util-to-string-C_aolqmU.js";import"./remark-rehype-C7cpKZXR.js";import"./mdast-util-to-hast--qmxlI7R.js";import"./@ungap-DDJC10qW.js";import"./micromark-util-sanitize-uri-WGc3xW3f.js";import"./unist-util-position-60F3QETU.js";import"./trim-lines-D8znQY54.js";import"./unist-util-visit-C5MGqtgf.js";import"./unist-util-visit-parents-BC5uWo4u.js";import"./unist-util-is-D9KQvrmg.js";import"./hast-util-to-jsx-runtime-BLSwkn7M.js";import"./comma-separated-tokens-xMQ5YY98.js";import"./property-information-Bcl-LqRA.js";import"./space-separated-tokens-DD3iYX1K.js";import"./style-to-js-CDqmnN_d.js";import"./style-to-object-Oc--562q.js";import"./inline-style-parser-D4u_cg7q.js";import"./hast-util-whitespace-D4Wp6AEg.js";import"./estree-util-is-identifier-name-BgBfM8ME.js";import"./html-url-attributes-D46m5wfe.js";import"./@babel-BM-RmR6T.js";import"./refractor-BVbasmXx.js";import"./hastscript-Cxyc55ZY.js";import"./xtend-VQg9yHl6.js";import"./hast-util-parse-selector-BXt8oe2z.js";import"./@lezer-Csp4QB38.js";import"./codemirror-lang-mermaid-CgP1sc6u.js";import"./@replit-CtI0wgL6.js";import"./@nextjournal-W5TzFINk.js";import"./colors-named-CSGyx1iI.js";import"./colors-named-hex-Db6HdBCI.js";import"./hsl-matcher-CyxH9sTP.js";import"./core-js-pure-C4mLA_hu.js";import"./prop-types-yNpOvJnk.js";import"./is-retina-BzLP6e3E.js";import"./md5-BDDM8jU4.js";import"./crypt-VTvMai_Y.js";import"./is-buffer-DMJNLjvk.js";import"./split.js-CPyVEc61.js";import"./@floating-ui-C8o30Yd9.js";import"./@radix-ui-DbwEOBZe.js";import"./react-remove-scroll-CjY7KAXu.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-Bft53YsI.js";import"./react-style-singleton-Ve9apNMX.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-CJ33BHOn.js";import"./use-callback-ref-CcqRhUnC.js";import"./aria-hidden-DQ5UC2Eg.js";import"./canvas-size-BJ7hgjqk.js";import"./@use-gesture-yVpL0cNb.js";import"./eventemitter3-D4IiiiOJ.js";import"./crelt-C8TCjufn.js";import"./style-mod-gVpFNjS1.js";import"./w3c-keyname-Vcq4gwWv.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}})();var _=(t=>(t.CODING="coding",t.DRAWING="drawing",t))(_||{}),Z=(t=>(t.OFFLINE="offline",t.ONLINE="online",t))(Z||{}),K=(t=>(t.INITIAL="initial",t.CONNECTING="connecting",t.ATTEMPTING_JOIN="attempting-join",t.JOINED="joined",t.CONNECTION_FAILED="connection-failed",t.DISCONNECTED="disconnected",t))(K||{});const Le=n.createContext(null),z=()=>{const t=n.useContext(Le);if(t===null)throw new Error("useAppContext must be used within a AppContextProvider");return t};function As({children:t}){const[s,r]=n.useState([]),[o,a]=n.useState(K.INITIAL),[c,u]=n.useState({username:"",roomId:""}),[l,i]=n.useState(_.CODING),[d,h]=n.useState(null);return e.jsx(Le.Provider,{value:{users:s,setUsers:r,currentUser:c,setCurrentUser:u,status:o,setStatus:a,activityState:l,setActivityState:i,drawingData:d,setDrawingData:h},children:t})}var N=(t=>(t.JOIN_REQUEST="join-request",t.JOIN_ACCEPTED="join-accepted",t.USER_JOINED="user-joined",t.USER_DISCONNECTED="user-disconnected",t.SYNC_FILE_STRUCTURE="sync-file-structure",t.DIRECTORY_CREATED="directory-created",t.DIRECTORY_UPDATED="directory-updated",t.DIRECTORY_RENAMED="directory-renamed",t.DIRECTORY_DELETED="directory-deleted",t.FILE_CREATED="file-created",t.FILE_UPDATED="file-updated",t.FILE_RENAMED="file-renamed",t.FILE_DELETED="file-deleted",t.USER_OFFLINE="offline",t.USER_ONLINE="online",t.SEND_MESSAGE="send-message",t.RECEIVE_MESSAGE="receive-message",t.TYPING_START="typing-start",t.TYPING_PAUSE="typing-pause",t.USERNAME_EXISTS="username-exists",t.REQUEST_DRAWING="request-drawing",t.SYNC_DRAWING="sync-drawing",t.DRAWING_UPDATE="drawing-update",t))(N||{});const Te=n.createContext(null),B=()=>{const t=n.useContext(Te);if(!t)throw new Error("useSocket must be used within a SocketProvider");return t},Os="http://localhost:5001",Fs=({children:t})=>{const{users:s,setUsers:r,setStatus:o,setCurrentUser:a,drawingData:c,setDrawingData:u}=z(),l=n.useMemo(()=>Ze(Os,{reconnectionAttempts:2}),[]),i=n.useCallback(p=>{console.log("socket error",p),o(K.CONNECTION_FAILED),P.dismiss(),P.error("Failed to connect to the server")},[o]),d=n.useCallback(()=>{P.dismiss(),o(K.INITIAL),P.error("The username you chose already exists in the room. Please choose a different username.")},[o]),h=n.useCallback(({user:p,users:x})=>{a(p),r(x),P.dismiss(),o(K.JOINED),x.length>1&&P.loading("Syncing data, please wait...")},[a,o,r]),b=n.useCallback(({user:p})=>{P.success(`${p.username} left the room`),r(s.filter(x=>x.username!==p.username))},[r,s]),m=n.useCallback(({socketId:p})=>{l.emit(N.SYNC_DRAWING,{socketId:p,drawingData:c})},[c,l]),f=n.useCallback(({drawingData:p})=>{u(p)},[u]);return n.useEffect(()=>(l.on("connect_error",i),l.on("connect_failed",i),l.on(N.USERNAME_EXISTS,d),l.on(N.JOIN_ACCEPTED,h),l.on(N.USER_DISCONNECTED,b),l.on(N.REQUEST_DRAWING,m),l.on(N.SYNC_DRAWING,f),()=>{l.off("connect_error"),l.off("connect_failed"),l.off(N.USERNAME_EXISTS),l.off(N.JOIN_ACCEPTED),l.off(N.USER_DISCONNECTED),l.off(N.REQUEST_DRAWING),l.off(N.SYNC_DRAWING)}),[f,i,h,m,b,d,r,l]),e.jsx(Te.Provider,{value:{socket:l},children:t})},Pe=n.createContext(null),ce=()=>{const t=n.useContext(Pe);if(!t)throw new Error("useChatRoom must be used within a ChatContextProvider");return t};function Us({children:t}){const{socket:s}=B(),[r,o]=n.useState([]),[a,c]=n.useState(!1),[u,l]=n.useState(0);return n.useEffect(()=>(s.on(N.RECEIVE_MESSAGE,({message:i})=>{o(d=>[...d,i]),c(!0)}),()=>{s.off(N.RECEIVE_MESSAGE)}),[s]),e.jsx(Pe.Provider,{value:{messages:r,setMessages:o,isNewMessage:a,setIsNewMessage:c,lastScrollHeight:u,setLastScrollHeight:l},children:t})}function zs(t){const s=new Date(t);let r=s.getHours();const o=String(s.getMinutes()).padStart(2,"0"),a=r>=12?"PM":"AM";return r=r%12,r=r||12,`${r}:${o} ${a}`}function _s(){const{currentUser:t}=z(),{socket:s}=B(),{setMessages:r}=ce(),o=n.useRef(null),[a,c]=n.useState(!1),u=l=>{var d;l.preventDefault();const i=(d=o.current)==null?void 0:d.value.trim();if(i&&i.length>0){const h={id:G(),message:i,username:t.username,timestamp:zs(new Date().toISOString())};s.emit(N.SEND_MESSAGE,{message:h}),r(b=>[...b,h]),o.current&&(o.current.value="")}};return e.jsxs("form",{onSubmit:u,className:"group relative mx-4 mb-4 overflow-hidden rounded-2xl bg-dark-800 shadow-xl transition-all duration-300 focus-within:shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-secondary/20 opacity-0 transition-opacity duration-300 group-hover:opacity-30 group-focus-within:opacity-50"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{type:"text",className:"w-full flex-grow border-none bg-transparent py-4 pl-6 pr-20 text-lg text-white placeholder-gray-400 outline-none transition-all duration-300",placeholder:"Type your message here ðŸ’¬...",ref:o,onFocus:()=>c(!0),onBlur:()=>c(!1)}),e.jsx(R.button,{className:"absolute right-4 flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-secondary p-3 shadow-lg transition-all duration-300 hover:scale-110 hover:shadow-xl active:scale-95",type:"submit",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(et,{className:"text-white",size:24})})]}),e.jsx(jt,{children:a&&e.jsx(R.div,{initial:{width:0},animate:{width:"100%"},exit:{width:0},className:"h-1 bg-gradient-to-r from-primary to-secondary",transition:{duration:.3}})})]})}function Ms(){const{messages:t,isNewMessage:s,setIsNewMessage:r,lastScrollHeight:o,setLastScrollHeight:a}=ce(),{currentUser:c}=z(),u=n.useRef(null),l=i=>{const d=i.target;a(d.scrollTop)};return n.useEffect(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},[t]),n.useEffect(()=>{s&&r(!1),u.current&&(u.current.scrollTop=o)},[s,r,o]),e.jsx("div",{className:"flex-grow overflow-auto rounded-md bg-darkHover p-2",ref:u,onScroll:l,children:t.map((i,d)=>e.jsxs("div",{className:"mb-2 w-[80%] self-end break-words rounded-md bg-dark px-3 py-2"+(i.username===c.username?" ml-auto ":""),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-primary",children:i.username}),e.jsx("span",{className:"text-xs text-white",children:i.timestamp})]}),e.jsx("p",{className:"py-1",children:i.message})]},d))})}function ee(){const[t,s]=n.useState({width:window.innerWidth,height:window.innerHeight}),[r,o]=n.useState(window.innerWidth<768);return n.useEffect(()=>{const a=()=>{s({width:window.innerWidth,height:window.innerHeight}),o(window.innerWidth<768)};return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[]),{...t,isMobile:r}}function M(){const[t,s]=n.useState(!1),{height:r,isMobile:o}=ee(),[a,c]=n.useState(r);return n.useEffect(()=>{r<500&&o?(s(!0),c(r)):o?(s(!1),c(r-50)):(s(!1),c(r))},[r,o,a]),{viewHeight:a,minHeightReached:t}}const Gs=()=>{const{viewHeight:t}=M();return e.jsxs("div",{className:"flex max-h-full min-h-[400px] w-full flex-col gap-2 p-4",style:{height:t},children:[e.jsx("h1",{className:"view-title",children:"Group Chat"}),e.jsx(Ms,{}),e.jsx(_s,{})]})},Hs="https://text.pollinations.ai",$s=A.create({baseURL:Hs,headers:{"Content-Type":"application/json"}}),Ae=n.createContext(null),qs=()=>{const t=n.useContext(Ae);if(t===null)throw new Error("useCopilot must be used within a CopilotContextProvider");return t},Bs=({children:t})=>{const[s,r]=n.useState(""),[o,a]=n.useState(""),[c,u]=n.useState(!1),l=async()=>{try{if(s.length===0){v.error("Please write a prompt");return}v.loading("Generating code..."),u(!0);const i=await $s.post("/",{messages:[{role:"system",content:"You are a code generator copilot for project named Code Sync. Generate code based on the given prompt without any explanation. Return only the code, formatted in Markdown using the appropriate language syntax (e.g., js for JavaScript, py for Python). Do not include any additional text or explanations. If you don't know the answer, respond with 'I don't know'."},{role:"user",content:s}],model:"mistral",private:!0});if(i.data){v.success("Code generated successfully");const d=i.data;d&&a(d)}u(!1),v.dismiss()}catch(i){console.error(i),u(!1),v.dismiss(),v.error("Failed to generate the code")}};return e.jsx(Ae.Provider,{value:{setInput:r,output:o,isRunning:c,generateCode:l},children:t})},Ys=`#include <iostream>
using namespace std;

int main() {
    cout<<"Welcome to CodeIt !";
    return 0;
}`,Ws={name:"root",id:G(),type:"directory",children:[{id:G(),type:"file",name:"code.cpp",content:Ys}]},Oe=(t,s)=>{if(t.id===s&&t.type==="directory")return t;if(t.type==="directory"&&t.children)for(const r of t.children){const o=Oe(r,s);if(o)return o}return null},we=(t,s)=>t.children?t.children.some(r=>r.name===s):!1,Js=(t,s)=>{const r=o=>{if(o.id===s)return o;if(o.children)for(const a of o.children){const c=r(a);if(c)return c}return null};return r(t)},Fe=t=>{if(t.type==="directory"&&t.children){let s=t.children.filter(o=>o.type==="directory");const r=t.children.filter(o=>o.type==="file");s.sort((o,a)=>o.name.localeCompare(a.name)),s=s.map(o=>Fe(o)),r.sort((o,a)=>o.name.localeCompare(a.name)),t.children=[...s.filter(o=>o.name.startsWith(".")),...s.filter(o=>!o.name.startsWith(".")),...r.filter(o=>o.name.startsWith(".")),...r.filter(o=>!o.name.startsWith("."))]}return t},Ue=n.createContext(null),Y=()=>{const t=n.useContext(Ue);if(!t)throw new Error("useFileSystem must be used within FileContextProvider");return t};function Vs({children:t}){const{socket:s}=B(),{setUsers:r,drawingData:o}=z(),[a,c]=n.useState(Ws),u=a.children?a.children:[],[l,i]=n.useState(u),[d,h]=n.useState(l[0]),b=g=>{const y=C=>C.id===g?{...C,isOpen:!C.isOpen}:C.children?{...C,children:C.children.map(y)}:C;c(C=>y(C))},m=()=>{const g=y=>{var C;return{...y,isOpen:!1,children:(C=y.children)==null?void 0:C.map(g)}};c(y=>g(y))},f=n.useCallback((g,y,C=!0)=>{let j;typeof y=="string"?j={id:G(),name:y,type:"directory",children:[],isOpen:!1}:j=y,g||(g=a.id);const E=S=>S.id===g?{...S,children:[...S.children||[],j]}:S.children?{...S,children:S.children.map(E)}:S;return c(S=>E(S)),C&&s.emit(N.DIRECTORY_CREATED,{parentDirId:g,newDirectory:j}),j.id},[a.id,s]),p=n.useCallback((g,y,C=!0)=>{g||(g=a.id);const j=E=>E.id===g?{...E,children:y}:E.children?{...E,children:E.children.map(j)}:E;c(E=>j(E)),i([]),h(null),g===a.id&&(P.dismiss(),P.success("Files and folders updated")),C&&s.emit(N.DIRECTORY_UPDATED,{dirId:g,children:y})},[a.id,s]),x=n.useCallback((g,y,C=!0)=>{const j=S=>S.type==="directory"&&S.children?S.children.some(k=>k.type==="directory"&&k.name===y&&k.id!==g)?null:{...S,children:S.children.map(k=>{if(k.id===g)return{...k,name:y};if(k.type==="directory"){const te=j(k);return te!==null?te:k}else return k})}:S,E=j(a);return E===null?!1:(c(E),C&&s.emit(N.DIRECTORY_RENAMED,{dirId:g,newDirName:y}),!0)},[s,c,a]),w=n.useCallback((g,y=!0)=>{const C=j=>{if(j.type==="directory"&&j.id===g)return null;if(j.children){const E=j.children.map(C).filter(S=>S!==null);return{...j,children:E}}else return j};c(j=>C(j)),y&&s.emit(N.DIRECTORY_DELETED,{dirId:g})},[s]),D=g=>{const y=Js(a,g);y&&(T((d==null?void 0:d.id)||"",(d==null?void 0:d.content)||""),l.some(C=>C.id===g)||i(C=>[...C,y]),i(C=>C.map(j=>j.id===(d==null?void 0:d.id)?{...j,content:d.content||""}:j)),h(y))},O=g=>{if(g===(d==null?void 0:d.id)){T(d.id,d.content||"");const y=l.findIndex(C=>C.id===g);y!==-1&&l.length>1?y>0?h(l[y-1]):h(l[y+1]):h(null)}i(y=>y.filter(C=>C.id!==g))},F=n.useCallback((g,y,C=!0)=>{let j=1;g||(g=a.id);const E=Oe(a,g);if(!E)throw new Error("Parent directory not found");let S;if(typeof y=="string"){let k=y,te=we(E,k);for(;te;)k=`${k.split(".")[0]}(${j}).${k.split(".")[1]}`,te=we(E,k),j++;S={id:G(),name:k,type:"file",content:""}}else S=y;const oe=k=>k.id===E.id?{...k,children:[...k.children||[],S],isOpen:!0}:k.children?{...k,children:k.children.map(oe)}:k;return c(k=>oe(k)),i(k=>[...k,S]),h(S),C&&s.emit(N.FILE_CREATED,{parentDirId:g,newFile:S}),S.id},[a,s]),T=n.useCallback((g,y)=>{const C=j=>j.type==="file"&&j.id===g?{...j,content:y}:j.children?{...j,children:j.children.map(C)}:j;c(j=>C(j)),l.some(j=>j.id===g)&&i(j=>j.map(E=>E.id===g?{...E,content:y}:E))},[l]),U=n.useCallback((g,y,C=!0)=>{const j=E=>E.type==="directory"&&E.children?{...E,children:E.children.map(S=>S.type==="file"&&S.id===g?{...S,name:y}:S)}:E;return c(E=>j(E)),i(E=>E.map(S=>S.id===g?{...S,name:y}:S)),g===(d==null?void 0:d.id)&&h(E=>E?{...E,name:y}:null),C&&s.emit(N.FILE_RENAMED,{fileId:g,newName:y}),!0},[d==null?void 0:d.id,s]),W=n.useCallback((g,y=!0)=>{const C=j=>{if(j.type==="directory"&&j.children){const E=j.children.map(S=>S.type==="directory"?C(S):S.id!==g?S:null).filter(S=>S!==null);return{...j,children:E}}else return j};c(j=>C(j)),l.some(j=>j.id===g)&&i(j=>j.filter(E=>E.id!==g)),(d==null?void 0:d.id)===g&&h(null),P.success("File deleted successfully"),y&&s.emit(N.FILE_DELETED,{fileId:g})},[d==null?void 0:d.id,l,s]),L=()=>{const g=new Et,y=(C,j="")=>{const E=j+C.name+(C.type==="directory"?"/":"");if(C.type==="file")g.file(E,C.content||"");else if(C.type==="directory"&&C.children)for(const S of C.children)y(S,E)};if(a.type==="directory"&&a.children)for(const C of a.children)y(C);g.generateAsync({type:"blob"}).then(C=>{Ct.saveAs(C,"download.zip")})},J=n.useCallback(({user:g})=>{P.success(`${g.username} joined the room`),s.emit(N.SYNC_FILE_STRUCTURE,{fileStructure:a,openFiles:l,activeFile:d,socketId:g.socketId}),s.emit(N.SYNC_DRAWING,{drawingData:o,socketId:g.socketId}),r(y=>[...y,g])},[d,o,a,l,r,s]),X=n.useCallback(({fileStructure:g,openFiles:y,activeFile:C})=>{c(g),i(y),h(C),P.dismiss()},[]),de=n.useCallback(({parentDirId:g,newDirectory:y})=>{f(g,y,!1)},[f]),ue=n.useCallback(({dirId:g,children:y})=>{p(g,y,!1)},[p]),me=n.useCallback(({dirId:g,newName:y})=>{x(g,y,!1)},[x]),pe=n.useCallback(({dirId:g})=>{w(g,!1)},[w]),he=n.useCallback(({parentDirId:g,newFile:y})=>{F(g,y,!1)},[F]),fe=n.useCallback(({fileId:g,newContent:y})=>{T(g,y),(d==null?void 0:d.id)===g&&h({...d,content:y})},[d,T]),ge=n.useCallback(({fileId:g,newName:y})=>{U(g,y,!1)},[U]),xe=n.useCallback(({fileId:g})=>{W(g,!1)},[W]);return n.useEffect(()=>(s.once(N.SYNC_FILE_STRUCTURE,X),s.on(N.USER_JOINED,J),s.on(N.DIRECTORY_CREATED,de),s.on(N.DIRECTORY_UPDATED,ue),s.on(N.DIRECTORY_RENAMED,me),s.on(N.DIRECTORY_DELETED,pe),s.on(N.FILE_CREATED,he),s.on(N.FILE_UPDATED,fe),s.on(N.FILE_RENAMED,ge),s.on(N.FILE_DELETED,xe),()=>{s.off(N.USER_JOINED),s.off(N.DIRECTORY_CREATED),s.off(N.DIRECTORY_UPDATED),s.off(N.DIRECTORY_RENAMED),s.off(N.DIRECTORY_DELETED),s.off(N.FILE_CREATED),s.off(N.FILE_UPDATED),s.off(N.FILE_RENAMED),s.off(N.FILE_DELETED)}),[de,pe,me,ue,he,xe,ge,X,fe,J,s]),e.jsx(Ue.Provider,{value:{fileStructure:a,openFiles:l,activeFile:d,setActiveFile:h,closeFile:O,toggleDirectory:b,collapseDirectories:m,createDirectory:f,updateDirectory:p,renameDirectory:x,deleteDirectory:w,openFile:D,createFile:F,updateFileContent:T,renameFile:U,deleteFile:W,downloadFilesAndFolders:L},children:t})}function Ks(){const{socket:t}=B(),{viewHeight:s}=M(),{generateCode:r,output:o,isRunning:a,setInput:c}=qs(),{activeFile:u,updateFileContent:l,setActiveFile:i}=Y(),d=async()=>{try{const m=o.replace(/```[\w]*\n?/g,"").trim();await navigator.clipboard.writeText(m),v.success("Output copied to clipboard")}catch(m){v.error("Unable to copy output to clipboard"),console.log(m)}},h=()=>{if(u){const f=`${u.content?`${u.content}
`:""}${o.replace(/```[\w]*\n?/g,"").trim()}`;l(u.id,f),i({...u,content:f}),v.success("Code pasted successfully"),t.emit(N.FILE_UPDATED,{fileId:u.id,newContent:f})}},b=()=>{if(u){if(!confirm("Are you sure you want to replace the code in the file?"))return;const f=o.replace(/```[\w]*\n?/g,"").trim();l(u.id,f),i({...u,content:f}),v.success("Code replaced successfully"),t.emit(N.FILE_UPDATED,{fileId:u.id,newContent:f})}};return e.jsxs("div",{className:"flex max-h-full min-h-[400px] w-full flex-col gap-2 p-4",style:{height:s},children:[e.jsx("h1",{className:"view-title",children:"Copilot"}),e.jsx("textarea",{className:"min-h-[120px] w-full rounded-md border-none bg-darkHover p-2 text-white outline-none",placeholder:"What code do you want to generate?",onChange:m=>c(m.target.value)}),e.jsx("button",{className:"mt-1 flex w-full justify-center rounded-md bg-primary p-2 font-bold text-black outline-none disabled:cursor-not-allowed disabled:opacity-50",onClick:r,disabled:a,children:a?"Generating...":"Generate Code"}),o&&e.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[e.jsx("button",{title:"Copy Output",onClick:d,children:e.jsx(le,{size:18,className:"cursor-pointer text-white"})}),e.jsx("button",{title:"Replace code in file",onClick:b,children:e.jsx(tt,{size:18,className:"cursor-pointer text-white"})}),e.jsx("button",{title:"Paste code in file",onClick:h,children:e.jsx(st,{size:18,className:"cursor-pointer text-white"})})]}),e.jsx("div",{className:"h-full rounded-lg w-full overflow-y-auto p-0",children:e.jsx(St,{components:{code({inline:m,className:f,children:p,...x}){const w=/language-(\w+)/.exec(f||""),D=w?w[1]:"javascript";return m?e.jsx("code",{className:f,...x,children:p}):e.jsx(kt,{style:Dt,language:D,PreTag:"pre",className:"!m-0 !h-full !rounded-lg !bg-gray-900 !p-2",children:String(p).replace(/\n$/,"")})},pre({children:m}){return e.jsx("pre",{className:"h-full",children:m})}},children:o})})]})}const ze=t=>{var o;return`vscode-icons:${(o=It.getIconForFile(t))==null?void 0:o.replace(/_/g,"-").split(".")[0]}`};function _e({id:t,preName:s,setEditing:r,type:o}){const[a,c]=n.useState(s||""),{renameFile:u,openFile:l,renameDirectory:i}=Y(),d=n.useRef(null),h=n.useRef(null),b=p=>{p.preventDefault(),p.stopPropagation();const x=o.charAt(0).toUpperCase()+o.slice(1);if(a==="")v.error(`${x} name cannot be empty`);else if(a.length>25)v.error(`${x} name cannot be longer than 25 characters`);else if(a===s)v.error(`${x} name cannot be the same as before`);else{const w=o==="directory"?i(t,a):u(t,a);w&&o==="file"&&l(t),w?r(!1):v.error(`${x} with same name already exists`)}},m=n.useCallback(p=>{var x;p.key==="Enter"?(x=d.current)==null||x.requestSubmit():p.key==="Escape"&&r(!1)},[r]),f=n.useCallback(p=>{const x=d.current;x&&!x.contains(p.target)&&r(!1)},[r]);return n.useEffect(()=>{var x;const p=d.current;if(p)return(x=h.current)==null||x.select(),p.addEventListener("keydown",m),document.addEventListener("keydown",f),document.addEventListener("click",f),()=>{p.removeEventListener("keydown",m),document.removeEventListener("keydown",f),document.removeEventListener("click",f)}},[f,m,r]),e.jsx("div",{className:"w-full",children:e.jsxs("form",{onSubmit:b,ref:d,className:"flex w-full items-center gap-1",children:[e.jsx("input",{ref:h,type:"text",className:"w-full flex-1 rounded border border-primary/50 bg-darkHover px-2 py-0.5 text-sm text-white outline-none ring-1 ring-primary/20 focus:border-primary/80 focus:ring-primary/40",autoFocus:!0,value:a,onChange:p=>c(p.target.value),onFocus:p=>p.target.select()}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{type:"submit",className:"rounded px-2 py-0.5 text-xs text-white hover:bg-primary/10",title:"Save",children:"âœ“"}),e.jsx("button",{type:"button",className:"rounded px-2 py-0.5 text-xs text-white hover:bg-white/10",onClick:()=>r(!1),title:"Cancel",children:"âœ•"})]})]})})}function Xs(){const{fileStructure:t,createFile:s,createDirectory:r,collapseDirectories:o}=Y(),a=n.useRef(null),[c,u]=n.useState(null),{minHeightReached:l}=M(),i=m=>{a.current&&!a.current.contains(m.target)&&u(t.id)},d=()=>{const m=prompt("Enter file name");if(m){const f=c||t.id;s(f,m)}},h=()=>{const m=prompt("Enter directory name");if(m){const f=c||t.id;r(f,m)}},b=Fe(t);return e.jsxs("div",{onClick:i,className:"flex flex-grow flex-col border-r border-white/5 bg-dark/50",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-white/5 p-3",children:[e.jsx("h2",{className:"text-lg font-medium text-white",children:"Explorer"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"rounded-md p-1 text-white/60 hover:bg-white/5 hover:text-white",onClick:d,title:"New File",children:e.jsx(rt,{size:18})}),e.jsx("button",{className:"rounded-md p-1 text-white/60 hover:bg-white/5 hover:text-white",onClick:h,title:"New Folder",children:e.jsx(ot,{size:18})}),e.jsx("button",{className:"rounded-md p-1 text-white/60 hover:bg-white/5 hover:text-white",onClick:o,title:"Collapse All",children:e.jsx(nt,{size:18})})]})]}),e.jsx("div",{className:$("flex-grow overflow-auto py-2",{"h-[calc(80vh-170px)]":!l,"h-[85vh]":l}),ref:a,children:b.children&&b.children.map(m=>e.jsx(Me,{item:m,setSelectedDirId:u},m.id))})]})}function Me({item:t,setSelectedDirId:s}){const[r,o]=n.useState(!1),[a,c]=n.useState(!1),u=n.useRef(null),{deleteDirectory:l,toggleDirectory:i}=Y(),d=m=>{s(m),i(m)},h=m=>{m.stopPropagation(),o(!0)},b=(m,f)=>{m.stopPropagation(),confirm("Are you sure you want to delete directory?")&&l(f)};return n.useEffect(()=>{const m=u.current;if(!m)return;m.tabIndex=0;const f=p=>{p.stopPropagation(),p.key==="F2"&&o(!0)};return m.addEventListener("keydown",f),()=>m.removeEventListener("keydown",f)},[]),t.type==="file"?e.jsx(Qs,{item:t,setSelectedDirId:s}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("div",{className:$("group relative flex w-full items-center rounded-md px-2 py-1 hover:bg-white/5"),onClick:()=>d(t.id),ref:u,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[t.isOpen?e.jsx(at,{size:20,className:"mr-2 min-w-fit text-primary/80"}):e.jsx(it,{size:20,className:"mr-2 min-w-fit text-white/60"}),r?e.jsx(_e,{id:t.id,preName:t.name,type:"directory",setEditing:o}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"flex-grow cursor-pointer overflow-hidden truncate text-white/90",title:t.name,children:t.name}),a&&e.jsxs("div",{className:"absolute right-2 flex gap-1",children:[e.jsx("button",{onClick:h,className:"rounded p-1 text-white/60 hover:bg-white/10 hover:text-white",title:"Rename",children:e.jsx(Ce,{size:16})}),e.jsx("button",{onClick:m=>b(m,t.id),className:"rounded p-1 text-white/60 hover:bg-white/10 hover:text-red-400",title:"Delete",children:e.jsx(Ee,{size:16})})]})]})]}),e.jsx("div",{className:$("border-l border-white/5",{hidden:!t.isOpen},{block:t.isOpen},{"ml-4":t.name!=="root"}),children:t.children&&t.children.map(m=>e.jsx(Me,{item:m,setSelectedDirId:s},m.id))})]})}const Qs=({item:t,setSelectedDirId:s})=>{const{deleteFile:r,openFile:o}=Y(),[a,c]=n.useState(!1),[u,l]=n.useState(!1),{setIsSidebarOpen:i}=re(),{isMobile:d}=ee(),{activityState:h,setActivityState:b}=z(),m=n.useRef(null),f=w=>{a||(s(w),o(w),d&&i(!1),h===_.DRAWING&&b(_.CODING))},p=w=>{w.stopPropagation(),c(!0)},x=(w,D)=>{w.stopPropagation(),confirm("Are you sure you want to delete file?")&&r(D)};return n.useEffect(()=>{const w=m.current;if(!w)return;w.tabIndex=0;const D=O=>{O.stopPropagation(),O.key==="F2"&&c(!0)};return w.addEventListener("keydown",D),()=>w.removeEventListener("keydown",D)},[]),e.jsxs("div",{className:"group relative flex w-full items-center rounded-md px-2 py-1 hover:bg-white/5",onClick:()=>f(t.id),ref:m,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[e.jsx(ke,{icon:ze(t.name),fontSize:18,className:"mr-2 min-w-fit text-white/60"}),a?e.jsx(_e,{id:t.id,preName:t.name,type:"file",setEditing:c}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"flex-grow cursor-pointer overflow-hidden truncate text-white/90",title:t.name,children:t.name}),u&&e.jsxs("div",{className:"absolute right-2 flex gap-1",children:[e.jsx("button",{onClick:p,className:"rounded p-1 text-white/60 hover:bg-white/10 hover:text-white",title:"Rename",children:e.jsx(Ce,{size:16})}),e.jsx("button",{onClick:w=>x(w,t.id),className:"rounded p-1 text-white/60 hover:bg-white/10 hover:text-red-400",title:"Delete",children:e.jsx(Ee,{size:16})})]})]})]})};function Zs(){const{downloadFilesAndFolders:t,updateDirectory:s}=Y(),{viewHeight:r}=M(),{minHeightReached:o}=M(),[a,c]=n.useState(!1),u=async()=>{try{if(c(!0),"showDirectoryPicker"in window){const b=await window.showDirectoryPicker();await l(b);return}if("webkitdirectory"in HTMLInputElement.prototype){const b=document.createElement("input");b.type="file",b.webkitdirectory=!0,b.onchange=async m=>{const f=m.target.files;if(f){const p=await d(f);s("",p)}},b.click();return}P.error("Your browser does not support directory selection.")}catch(b){console.error("Error opening directory:",b),P.error("Failed to open directory")}finally{c(!1)}},l=async b=>{try{P.loading("Getting files and folders...");const m=await i(b);s("",m),P.dismiss(),P.success("Directory loaded successfully")}catch(m){console.error("Error processing directory:",m),P.error("Failed to process directory")}},i=async b=>{const m=[],f=["node_modules",".git",".vscode",".next"];for await(const p of b.values())if(p.kind==="file"){const x=await p.getFile(),w={id:G(),name:p.name,type:"file",content:await h(x)};m.push(w)}else if(p.kind==="directory"){if(f.includes(p.name))continue;const x={id:G(),name:p.name,type:"directory",children:await i(p),isOpen:!1};m.push(x)}return m},d=async b=>{const m=[],f=["node_modules",".git",".vscode",".next"];for(let p=0;p<b.length;p++){const x=b[p],w=x.webkitRelativePath.split("/");if(!w.some(D=>f.includes(D)))if(w.length>1){const D=w.slice(0,-1).join("/");if(m.findIndex(U=>U.name===D&&U.type==="directory")===-1){const U={id:G(),name:D,type:"directory",children:[],isOpen:!1};m.push(U)}const F={id:G(),name:x.name,type:"file",content:await h(x)},T=m.find(U=>U.name===D&&U.type==="directory");T&&T.children&&T.children.push(F)}else{const D={id:G(),name:x.name,type:"file",content:await h(x)};m.push(D)}}return m},h=async b=>{if(b.size>1048576)return`File too large: ${b.name} (${Math.round(b.size/1024)}KB)`;try{return await b.text()}catch(f){return console.error(`Error reading file ${b.name}:`,f),`Error reading file: ${b.name}`}};return e.jsxs("div",{className:"flex select-none flex-col gap-1 px-4 py-2",style:{height:r,maxHeight:r},children:[e.jsx(Xs,{}),e.jsxs("div",{className:$("flex min-h-fit flex-col justify-end pt-2",{hidden:o}),children:[e.jsx("hr",{}),e.jsxs("button",{className:"mt-2 flex w-full justify-start rounded-md p-2 transition-all hover:bg-darkHover",onClick:u,disabled:a,children:[e.jsx(lt,{className:"mr-2",size:24}),a?"Loading...":"Open File/Folder"]}),e.jsxs("button",{className:"flex w-full justify-start rounded-md p-2 transition-all hover:bg-darkHover",onClick:t,children:[e.jsx(ct,{className:"mr-2",size:22})," Download Code"]})]})]})}const er="https://emkc.org/api/v2/piston",ye=A.create({baseURL:er,headers:{"Content-Type":"application/json"}}),Ge=n.createContext(null),tr=()=>{const t=n.useContext(Ge);if(t===null)throw new Error("useRunCode must be used within a RunCodeContextProvider");return t},sr=({children:t})=>{const{activeFile:s}=Y(),[r,o]=n.useState(""),[a,c]=n.useState(""),[u,l]=n.useState(!1),[i,d]=n.useState([]),[h,b]=n.useState({language:"",version:"",aliases:[]});n.useEffect(()=>{(async()=>{var p,x;try{const w=await ye.get("/runtimes");d(w.data)}catch(w){v.error("Failed to fetch supported languages"),(p=w==null?void 0:w.response)!=null&&p.data&&console.error((x=w==null?void 0:w.response)==null?void 0:x.data)}})()},[]),n.useEffect(()=>{if(i.length===0||!(s!=null&&s.name))return;const f=s.name.split(".").pop();if(f){const p=De.languages(f),x=i.find(w=>w.aliases.includes(f)||p.includes(w.language.toLowerCase()));x&&b(x)}else b({language:"",version:"",aliases:[]})},[s==null?void 0:s.name,i]);const m=async()=>{try{if(h)if(s)v.loading("Running code...");else return v.error("Please open a file to run the code");else return v.error("Please select a language to run the code");l(!0);const{language:f,version:p}=h,x=await ye.post("/execute",{language:f,version:p,files:[{name:s.name,content:s.content}],stdin:r});x.data.run.stderr?c(x.data.run.stderr):c(x.data.run.stdout),l(!1),v.dismiss()}catch(f){console.error(f.response.data),console.error(f.response.data.error),l(!1),v.dismiss(),v.error("Failed to run the code")}};return e.jsx(Ge.Provider,{value:{setInput:o,output:a,isRunning:u,supportedLanguages:i,selectedLanguage:h,setSelectedLanguage:b,runCode:m},children:t})};function rr(){const{viewHeight:t}=M(),{setInput:s,output:r,isRunning:o,supportedLanguages:a,selectedLanguage:c,setSelectedLanguage:u,runCode:l}=tr(),i=h=>{const b=JSON.parse(h.target.value);u(b)},d=()=>{navigator.clipboard.writeText(r),v.success("Output copied to clipboard")};return e.jsxs("div",{className:"flex flex-col items-center gap-2 p-4",style:{height:t},children:[e.jsx("h1",{className:"view-title",children:"Run Code"}),e.jsxs("div",{className:"flex h-[90%] w-full flex-col items-end gap-2 md:h-[92%]",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("select",{className:"w-full rounded-md border-none bg-darkHover px-4 py-2 text-white outline-none",value:JSON.stringify(c),onChange:i,children:a.sort((h,b)=>h.language>b.language?1:-1).map((h,b)=>e.jsx("option",{value:JSON.stringify(h),children:h.language+(h.version?` (${h.version})`:"")},b))}),e.jsx(Se,{size:16,className:"absolute bottom-3 right-4 z-10 text-white"})]}),e.jsx("textarea",{className:"min-h-[120px] w-full resize-none rounded-md border-none bg-darkHover p-2 text-white outline-none",placeholder:"Write you input here...",onChange:h=>s(h.target.value)}),e.jsx("button",{className:"flex w-full justify-center rounded-md bg-primary p-2 font-bold text-black outline-none disabled:cursor-not-allowed disabled:opacity-50",onClick:l,disabled:o,children:"Run"}),e.jsxs("label",{className:"flex w-full justify-between",children:["Output :",e.jsx("button",{onClick:d,title:"Copy Output",children:e.jsx(le,{size:18,className:"cursor-pointer text-white"})})]}),e.jsx("div",{className:"w-full flex-grow resize-none overflow-y-auto rounded-md border-none bg-darkHover p-2 text-white outline-none",children:e.jsx("code",{children:e.jsx("pre",{className:"text-wrap",children:r})})})]})]})}function ne({onChange:t,value:s,options:r,title:o}){return e.jsxs("div",{className:"relative w-full",children:[e.jsx("label",{className:"mb-2",children:o}),e.jsx("select",{className:"w-full rounded-md border-none bg-darkHover px-4 py-2 text-white outline-none",value:s,onChange:t,children:r.sort().map(a=>{const c=a,u=a.charAt(0).toUpperCase()+a.slice(1);return e.jsx("option",{value:c,children:u},u)})}),e.jsx(Se,{size:16,className:"absolute bottom-3 right-4 z-10 text-white"})]})}function He(){return{setItem:(o,a)=>{localStorage.setItem(o,a)},getItem:o=>localStorage.getItem(o),removeItem:o=>{localStorage.removeItem(o)}}}const $e=n.createContext(null),se=()=>{const t=n.useContext($e);if(!t)throw new Error("useSettings must be used within a SettingContextProvider");return t},H={theme:"Dracula",language:"Cpp",fontSize:16,fontFamily:"Space Mono",showGitHubCorner:!0};function or({children:t}){const{getItem:s}=He(),r=JSON.parse(s("settings")||"{}"),o=r.theme!==void 0?r.theme:H.theme,a=r.language!==void 0?r.language:H.language,c=r.fontSize!==void 0?r.fontSize:H.fontSize,u=r.fontFamily!==void 0?r.fontFamily:H.fontFamily,l=r.showGitHubCorner!==void 0?r.showGitHubCorner:H.showGitHubCorner,[i,d]=n.useState(o),[h,b]=n.useState(a),[m,f]=n.useState(c),[p,x]=n.useState(u),[w,D]=n.useState(l),O=()=>{d(H.theme),b(H.language),f(H.fontSize),x(H.fontFamily),D(H.showGitHubCorner)};return n.useEffect(()=>{const F={theme:i,language:h,fontSize:m,fontFamily:p,showGitHubCorner:w};localStorage.setItem("settings",JSON.stringify(F))},[i,h,m,p,w]),e.jsx($e.Provider,{value:{theme:i,setTheme:d,language:h,setLanguage:b,fontSize:m,setFontSize:f,fontFamily:p,setFontFamily:x,showGitHubCorner:w,setShowGitHubCorner:D,resetSettings:O},children:t})}const nr=["Anonymous Pro","Cousine","Fira Code","Inconsolata","JetBrains Mono","Jura","Roboto Mono","Source Code Pro","Space Mono","Ubuntu Mono"],qe={Abcdef:bs,Abyss:xs,"Android Studio":gs,Andromeda:fs,"Atom One":hs,Aura:ps,"Basic Dark":ms,"Basic Light":us,BBEdit:ds,Bespin:cs,Copilot:ls,Darcula:is,Dracula:as,"Duotone Dark":ns,"Duotone Light":os,Eclipse:rs,"GitHub Dark":ss,"GitHub Light":ts,"Gruvbox Dark":es,"Gruvbox Light":Zt,Kimbie:Qt,Material:Xt,"Material Dark":Kt,"Material Light":Vt,Monokai:Jt,"Monokai Dimmed":Wt,"Noctis Lilac":Yt,Nord:Bt,Okaidia:qt,"Quiet Light":$t,Red:Ht,"Solarized Dark":Gt,"Solarized Light":Mt,Sublime:_t,"Tokyo Night":zt,"Tokyo Night Day":Ut,"Tokyo Night Storm":Ft,"Tomorrow Night Blue":Ot,"VS Code Dark":At,"White Dark":Pt,"White Light":Tt,"Xcode Dark":Lt,"Xcode Light":Rt};function ar(){const{theme:t,setTheme:s,language:r,setLanguage:o,fontSize:a,setFontSize:c,fontFamily:u,setFontFamily:l,resetSettings:i}=se(),{viewHeight:d}=M(),h=p=>l(p.target.value),b=p=>s(p.target.value),m=p=>o(p.target.value),f=p=>c(parseInt(p.target.value));return n.useEffect(()=>{const p=document.querySelector(".cm-editor > .cm-scroller");p!==null&&(p.style.fontFamily=`${u}, monospace`)},[u]),e.jsxs("div",{className:"flex flex-col items-center gap-2 p-4",style:{height:d},children:[e.jsx("h1",{className:"view-title",children:"Settings"}),e.jsxs("div",{className:"flex w-full items-end gap-2",children:[e.jsx(ne,{onChange:h,value:u,options:nr,title:"Font Family"}),e.jsx("select",{value:a,onChange:f,className:"rounded-md border-none bg-darkHover px-4 py-2 text-white outline-none",title:"Font Size",children:[...Array(13).keys()].map(p=>e.jsx("option",{value:p+12,children:p+12},p))})]}),e.jsx(ne,{onChange:b,value:t,options:Object.keys(qe),title:"Theme"}),e.jsx(ne,{onChange:m,value:r,options:ws,title:"Language"}),e.jsx("button",{className:"mt-auto w-full rounded-md border-none bg-darkHover px-4 py-2 text-white outline-none",onClick:i,children:"Reset to default"})]})}const ir={[Z.ONLINE]:{color:"bg-green-500",icon:e.jsx(ut,{className:"text-green-500",size:12}),pulse:!0,text:"Active now",textColor:"text-green-400"},[Z.OFFLINE]:{color:"bg-gray-500",icon:e.jsx(dt,{className:"text-gray-500",size:12}),pulse:!1,text:"Offline",textColor:"text-gray-400"}};function lr(){const{users:t}=z();return e.jsxs("div",{className:"flex min-h-[200px] flex-grow flex-col overflow-y-auto p-4",children:[e.jsxs("h3",{className:"mb-4 text-lg font-semibold text-white/80",children:["Active Users (",t.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:t.map((s,r)=>e.jsx(R.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:r*.05},className:"w-full",children:e.jsx(cr,{user:s})},s.socketId))})]})}const cr=({user:t})=>{const{username:s,status:r}=t,o=ir[r];return e.jsxs("div",{className:"group flex items-center gap-3 p-2 transition-all hover:bg-darkHover/50 rounded-lg w-full",children:[e.jsxs("div",{className:"relative shrink-0",children:[e.jsx(Cs,{name:s,size:"40",round:"12px",className:"transition-transform group-hover:scale-105",color:r===Z.ONLINE?"#3B82F6":"#6B7280",fgColor:"white"}),e.jsx("div",{className:"absolute -right-1 -bottom-1 flex h-4 w-4 items-center justify-center rounded-full border-2 border-dark bg-dark",children:o.icon}),o.pulse&&e.jsx("div",{className:"absolute -right-1 -bottom-1 h-4 w-4 rounded-full bg-green-500/20 animate-ping"})]}),e.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[e.jsx("p",{className:"text-white font-medium truncate",children:s}),e.jsx("span",{className:`text-xs ${o.textColor}`,children:o.text})]})]})};function dr(){const t=q(),{viewHeight:s}=M(),{setStatus:r}=z(),{socket:o}=B(),a=async()=>{const l=window.location.pathname.split("/"),i=l[l.length-1];try{await navigator.clipboard.writeText(i),v.success("Room ID copied to clipboard")}catch(d){v.error("Unable to copy Room ID to clipboard"),console.log(d)}},c=async()=>{if(!navigator.share){v.error("Web Share API is not supported in this browser.");return}try{await navigator.share({title:"Check this out!",text:"Hey, take a look at this link!",url:window.location.href})}catch(l){v.error("Unable to share URL"),console.log(l)}},u=()=>{o.disconnect(),r(K.DISCONNECTED),t("/dashboard",{replace:!0})};return e.jsxs("div",{className:"flex flex-col p-4",style:{height:s},children:[e.jsx("h1",{className:"view-title",children:"Users"}),e.jsx(lr,{}),e.jsx("div",{className:"flex flex-col items-center gap-4 pt-4",children:e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsx("button",{className:"flex flex-grow items-center justify-center rounded-md bg-white p-3 text-black",onClick:c,title:"Share Link",children:e.jsx(mt,{size:26})}),e.jsx("button",{className:"flex flex-grow items-center justify-center rounded-md bg-white p-3 text-black",onClick:a,title:"Copy Link",children:e.jsx(le,{size:22})}),e.jsx("button",{className:"flex flex-grow items-center justify-center rounded-md bg-primary p-3 text-black",onClick:u,title:"Leave room",children:e.jsx(pt,{size:22})})]})})]})}var I=(t=>(t.FILES="FILES",t.CHATS="CHATS",t.CLIENTS="CLIENTS",t.RUN="RUN",t.COPILOT="COPILOT",t.SETTINGS="SETTINGS",t))(I||{});const Be=n.createContext(null),re=()=>{const t=n.useContext(Be);if(!t)throw new Error("useViews must be used within a ViewContextProvider");return t};function ur({children:t}){const{isMobile:s}=ee(),[r,o]=n.useState(I.FILES),[a,c]=n.useState(!s),[u]=n.useState({[I.FILES]:e.jsx(Zs,{}),[I.CLIENTS]:e.jsx(dr,{}),[I.SETTINGS]:e.jsx(ar,{}),[I.COPILOT]:e.jsx(Ks,{}),[I.CHATS]:e.jsx(Gs,{}),[I.RUN]:e.jsx(rr,{})}),[l]=n.useState({[I.FILES]:e.jsx(wt,{size:28}),[I.CLIENTS]:e.jsx(bt,{size:30}),[I.SETTINGS]:e.jsx(xt,{size:28}),[I.CHATS]:e.jsx(gt,{size:30}),[I.COPILOT]:e.jsx(ft,{size:28}),[I.RUN]:e.jsx(ht,{size:28})});return e.jsx(Be.Provider,{value:{activeView:r,setActiveView:o,isSidebarOpen:a,setIsSidebarOpen:c,viewComponents:u,viewIcons:l},children:t})}function mr({children:t}){const{isSidebarOpen:s}=re(),{isMobile:r,width:o}=ee(),{setItem:a,getItem:c}=He(),u=()=>{const m=document.createElement("div");return m.className="h-full cursor-e-resizer hidden md:block",m.style.backgroundColor="#e1e1ffb3",m},l=()=>{if(r)return[0,o];const m=c("editorSizes");let f=[35,65];return m&&(f=JSON.parse(m)),s?f:[0,o]},i=()=>r?[0,o]:s?[350,350]:[50,0],d=()=>r?[0,1/0]:s?[1/0,1/0]:[0,1/0],h=m=>{a("editorSizes",JSON.stringify(m))},b=()=>({width:"7px",display:s&&!r?"block":"none"});return e.jsx(ks,{sizes:l(),minSize:i(),gutter:u,maxSize:d(),dragInterval:1,direction:"horizontal",gutterAlign:"center",cursor:"e-resize",snapOffset:30,gutterStyle:b,onDrag:h,className:"flex h-screen min-h-screen max-w-full items-center justify-center overflow-hidden",children:t})}function pr(){return e.jsx("div",{className:"flex h-screen min-h-screen flex-col items-center justify-center gap-6 px-4 text-center",children:e.jsx(hr,{})})}const hr=()=>{const t=q(),s=()=>{window.location.reload()},r=()=>{t("/")};return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"whitespace-break-spaces text-lg font-medium text-slate-300",children:"Oops! Something went wrong. Please try again"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsx("button",{className:"mr-4 rounded-md bg-primary px-8 py-2 font-bold text-black",onClick:s,children:"Try Again"}),e.jsx("button",{className:"rounded-md bg-primary px-8 py-2 font-bold text-black",onClick:r,children:"Go to HomePage"})]})]})},Ye={backgroundColor:"#e0e0e0",padding:"8px 12px",borderRadius:"6px",color:"#000",fontSize:"12px",fontWeight:"500",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},ve={base:"relative flex items-center justify-center rounded transition-colors duration-200 ease-in-out p-2",hover:"hover:bg-[#3D404A]"},Q=({viewName:t,icon:s})=>{const{activeView:r,setActiveView:o,isSidebarOpen:a,setIsSidebarOpen:c}=re(),{isNewMessage:u}=ce(),[l,i]=n.useState(!0),d=h=>{h===r?c(!a):(c(!0),o(h))};return e.jsxs("div",{className:"relative flex flex-col items-center",children:[e.jsxs("button",{onClick:()=>d(t),onMouseEnter:()=>i(!0),className:`${ve.base} ${ve.hover}`,...l&&{"data-tooltip-id":`tooltip-${t}`,"data-tooltip-content":t},children:[e.jsx("div",{className:"flex items-center justify-center",children:s}),t===I.CHATS&&u&&e.jsx("div",{className:"absolute right-0 top-0 h-3 w-3 rounded-full bg-primary"})]}),l&&e.jsx(Re,{id:`tooltip-${t}`,place:"right",offset:25,className:"!z-50",style:Ye,noArrow:!1,positionStrategy:"fixed",float:!0})]})};function fr(){const{activeView:t,isSidebarOpen:s,viewComponents:r,viewIcons:o,setIsSidebarOpen:a}=re(),{minHeightReached:c}=M(),{activityState:u,setActivityState:l}=z(),{socket:i}=B(),{isMobile:d}=ee(),[h,b]=n.useState(!0),m=()=>{b(!1),u===_.CODING?(l(_.DRAWING),i.emit(N.REQUEST_DRAWING)):l(_.CODING),d&&a(!1)};return e.jsxs("aside",{className:"flex h-full w-full md:w-auto",children:[e.jsxs("div",{className:$("fixed bottom-0 left-0 z-50 flex h-14 w-full items-center justify-between border-t border-white/5 bg-dark/95 px-4 backdrop-blur-sm md:static md:h-full md:w-16 md:flex-col md:justify-start md:border-r md:border-t-0 md:px-0 md:py-4",{"hidden md:flex":c}),children:[e.jsxs("div",{className:"flex flex-1 gap-3 overflow-x-auto md:flex-col md:gap-2 flex-nowrap md:overflow-visible",children:[e.jsx(Q,{viewName:I.FILES,icon:o[I.FILES]}),e.jsx(Q,{viewName:I.CHATS,icon:o[I.CHATS]}),e.jsx(Q,{viewName:I.COPILOT,icon:o[I.COPILOT]}),e.jsx(Q,{viewName:I.RUN,icon:o[I.RUN]}),e.jsx(Q,{viewName:I.CLIENTS,icon:o[I.CLIENTS]}),e.jsx(Q,{viewName:I.SETTINGS,icon:o[I.SETTINGS]})]}),e.jsxs("div",{className:"flex h-fit items-center justify-center md:mt-auto mt-[-10px]",children:[e.jsx("button",{className:$("flex items-center justify-center rounded-lg p-2 transition-all","hover:bg-white/5","focus:outline-none focus:ring-2 focus:ring-primary/50",{"text-primary":u===_.CODING,"text-white/80":u!==_.CODING}),onClick:m,onMouseEnter:()=>b(!0),"data-tooltip-id":"activity-state-tooltip","data-tooltip-content":u===_.CODING?"Switch to Drawing Mode":"Switch to Coding Mode",children:u===_.CODING?e.jsx(yt,{size:24}):e.jsx(vt,{size:24})}),h&&e.jsx(Re,{id:"activity-state-tooltip",place:"right",offset:15,className:"!z-50",style:Ye,noArrow:!1,positionStrategy:"fixed",float:!0})]})]}),e.jsx("div",{className:$("absolute left-0 top-0 z-40 h-full w-full border-r border-white/5 bg-dark/95 backdrop-blur-sm transition-all duration-200 md:static md:w-90",{"translate-x-0":s,"-translate-x-full md:translate-x-0 md:hidden":!s}),children:r[t]})]})}function gr(){const{isMobile:t}=ee();return e.jsx(Ds,{inferDarkMode:!0,forceMobile:t,defaultName:"Editor",className:"z-0",children:e.jsx(xr,{})})}function xr(){const t=Is(),{drawingData:s,setDrawingData:r}=z(),{socket:o}=B(),a=n.useCallback(u=>{const l=u.changes;r(t.store.getSnapshot()),o.emit(N.DRAWING_UPDATE,{snapshot:l})},[t.store,r,o]),c=n.useCallback(({snapshot:u})=>{t.store.mergeRemoteChanges(()=>{const{added:l,updated:i,removed:d}=u;for(const h of Object.values(l))t.store.put([h]);for(const[,h]of Object.values(i))t.store.put([h]);for(const h of Object.values(d))t.store.remove([h.id])}),r(t.store.getSnapshot())},[t.store,r]);return n.useEffect(()=>{s&&Object.keys(s).length>0&&t.store.loadSnapshot(s)},[]),n.useEffect(()=>{const u=t.store.listen(a,{source:"user",scope:"document"});return o.on(N.DRAWING_UPDATE,c),()=>{u(),o.off(N.DRAWING_UPDATE)}},[s,t.store,a,c,o]),null}function br(){const{fontSize:t,setFontSize:s}=se();n.useEffect(()=>{const r=o=>{const a="Changes you made may not be saved";return o.returnValue=a};return window.addEventListener("beforeunload",r),()=>{window.removeEventListener("beforeunload",r)}},[]),n.useEffect(()=>{const r=o=>{if(o.ctrlKey){if(o.preventDefault(),!o.target.closest(".cm-editor"))return;o.deltaY>0?s(Math.max(t-1,12)):s(Math.min(t+1,24))}};return window.addEventListener("wheel",r,{passive:!1}),()=>{window.removeEventListener("wheel",r)}},[t,s])}function wr(t){return Ls.define({create:()=>Ne(t),update(s,r){return!r.docChanged&&!r.selection?s:Ne(t)},provide:s=>Ts.computeN([s],r=>r.field(s))})}function Ne(t){return t.map(s=>{if(!s.typing)return null;let r=s.username;const o=s.cursorPosition;return s&&(r=s.username),{pos:o,above:!0,strictSide:!0,arrow:!0,create:()=>{const a=document.createElement("div");return a.className="cm-tooltip-cursor",a.textContent=r,{dom:a}}}})}const yr=Rs.baseTheme({".cm-tooltip.cm-tooltip-cursor":{backgroundColor:"#66b",color:"white",border:"none",padding:"2px 7px",borderRadius:"4px",zIndex:"10","& .cm-tooltip-arrow:before":{borderTopColor:"#66b"},"& .cm-tooltip-arrow:after":{borderTopColor:"transparent"}}});function vr(){const{users:t,currentUser:s}=z(),{activeFile:r,setActiveFile:o}=Y(),{theme:a,language:c,fontSize:u}=se(),{socket:l}=B(),{viewHeight:i}=M(),[d,h]=n.useState(setTimeout(()=>{},0)),b=n.useMemo(()=>t.filter(x=>x.username!==s.username),[t,s]),[m,f]=n.useState([]),p=(x,w)=>{var T,U,W;if(!r)return;const D={...r,content:x};o(D);const O=(W=(U=(T=w.state)==null?void 0:T.selection)==null?void 0:U.main)==null?void 0:W.head;l.emit(N.TYPING_START,{cursorPosition:O}),l.emit(N.FILE_UPDATED,{fileId:r.id,newContent:x}),clearTimeout(d);const F=setTimeout(()=>l.emit(N.TYPING_PAUSE),1e3);h(F)};return br(),n.useEffect(()=>{const x=[ys,vs,wr(b),yr,Ps()],w=Ns(c.toLowerCase());w&&x.push(w),f(x)},[b,c]),e.jsx(js,{theme:qe[a],onChange:p,value:r==null?void 0:r.content,extensions:m,minHeight:"100%",maxWidth:"100vw",style:{fontSize:u+"px",height:i,position:"relative"}})}const je={php:"php",cs:"csharp",cpp:"cpp",js:"javascript",ts:"typescript",py:"python",rb:"ruby",java:"java",kt:"kotlin",swift:"swift",go:"go",rs:"rust",dart:"dart",lua:"lua",r:"r",scala:"scala",sh:"shell",sql:"sql",html:"html",css:"css",json:"json",yaml:"yaml",md:"markdown"};function Nr(){const{openFiles:t,closeFile:s,activeFile:r,updateFileContent:o,setActiveFile:a}=Y(),c=n.useRef(null),{setLanguage:u}=se(),l=i=>{if((r==null?void 0:r.id)===i)return;o((r==null?void 0:r.id)||"",(r==null?void 0:r.content)||"");const d=t.find(h=>h.id===i);d&&a(d)};return n.useEffect(()=>{const i=c.current;if(!i)return;const d=h=>{i.scrollLeft+=h.deltaY>0?100:-100};return i.addEventListener("wheel",d),()=>i.removeEventListener("wheel",d)},[]),n.useEffect(()=>{if(!(r!=null&&r.name))return;const i=r.name.split(".").pop();if(!i)return;if(je[i]){u(je[i]);return}const d=De.languages(i);u(d[0])},[r==null?void 0:r.name,u]),e.jsx("div",{className:"relative border-b border-white/5 bg-dark",children:e.jsx("div",{ref:c,className:"flex h-12 w-full select-none items-end overflow-x-auto scrollbar-hide",children:e.jsx("div",{className:"flex h-full items-end gap-1 px-2",children:t.map(i=>e.jsxs("div",{className:$("group relative flex h-9 min-w-fit max-w-[200px] items-center rounded-t-md border-t border-r border-l border-transparent px-3 transition-all",{"border-t-primary/50 border-r-white/5 border-l-white/5 bg-dark text-white":i.id===(r==null?void 0:r.id),"bg-darkHover/30 text-white/70 hover:bg-darkHover/50":i.id!==(r==null?void 0:r.id)}),onClick:()=>l(i.id),children:[e.jsx(ke,{icon:ze(i.name),fontSize:18,className:$("mr-2 shrink-0",{"text-primary":i.id===(r==null?void 0:r.id),"text-white/60":i.id!==(r==null?void 0:r.id)})}),e.jsx("p",{className:"truncate text-sm font-medium",children:i.name}),e.jsx("button",{className:"ml-2 rounded p-1 opacity-0 transition-all hover:bg-white/10 group-hover:opacity-100",onClick:d=>{d.stopPropagation(),s(i.id)},children:e.jsx(Nt,{size:16,className:"text-white/60 hover:text-white"})}),i.id===(r==null?void 0:r.id)&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[2px] bg-primary"})]},i.id))})})})}function jr(){const{openFiles:t}=Y(),{minHeightReached:s}=M();return t.length<=0?e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx("h1",{className:"text-xl text-white",children:"No file is currently open."})}):e.jsxs("main",{className:$("flex w-full flex-col overflow-x-auto md:h-screen",{"h-[calc(100vh-50px)]":!s,"h-full":s}),children:[e.jsx(Nr,{}),e.jsx(vr,{})]})}function Cr(){const{viewHeight:t}=M(),{activityState:s}=z();return e.jsx("div",{className:"absolute left-0 top-0 w-full max-w-full flex-grow overflow-x-hidden md:static",style:{height:t},children:s===_.DRAWING?e.jsx(gr,{}):e.jsx(jr,{})})}function Er(){function t(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(o=>navigator.userAgent.match(o))}const s=t();n.useEffect(()=>{s&&be.isEnabled&&be.request()},[s])}function Sr(){const{setUsers:t}=z(),{socket:s}=B(),r=n.useCallback(()=>{document.visibilityState==="visible"?s.emit(N.USER_ONLINE,{socketId:s.id}):document.visibilityState==="hidden"&&s.emit(N.USER_OFFLINE,{socketId:s.id})},[s]),o=n.useCallback(({socketId:u})=>{t(l=>l.map(i=>i.socketId===u?{...i,status:Z.ONLINE}:i))},[t]),a=n.useCallback(({socketId:u})=>{t(l=>l.map(i=>i.socketId===u?{...i,status:Z.OFFLINE}:i))},[t]),c=n.useCallback(({user:u})=>{t(l=>l.map(i=>i.socketId===u.socketId?u:i))},[t]);n.useEffect(()=>(document.addEventListener("visibilitychange",r),s.on(N.USER_ONLINE,o),s.on(N.USER_OFFLINE,a),s.on(N.TYPING_START,c),s.on(N.TYPING_PAUSE,c),()=>{document.removeEventListener("visibilitychange",r),s.off(N.USER_ONLINE),s.off(N.USER_OFFLINE),s.off(N.TYPING_START),s.off(N.TYPING_PAUSE)}),[s,t,r,o,a,c])}function kr(){var l;Sr(),Er();const t=q(),{roomId:s}=Es(),{status:r,setCurrentUser:o,currentUser:a}=z(),{socket:c}=B(),u=Ie();return n.useEffect(()=>{var d;if(a.username.length>0)return;const i=(d=u.state)==null?void 0:d.username;if(i===void 0)t("/",{state:{roomId:s}});else if(s){const h={username:i,roomId:s};o(h),c.emit(N.JOIN_REQUEST,h)}},[a.username,(l=u.state)==null?void 0:l.username,t,s,o,c]),r===K.CONNECTION_FAILED?e.jsx(pr,{}):e.jsxs(mr,{children:[e.jsx(fr,{}),e.jsx(Cr,{})]})}A.defaults.withCredentials=!0;const Dr=()=>{const t=q(),[s,r]=n.useState(""),[o,a]=n.useState(""),[c,u]=n.useState(!1),[l,i]=n.useState(120),[d,h]=n.useState(!1);n.useEffect(()=>{let p;return d&&l>0?p=setInterval(()=>{i(x=>x-1)},1e3):l===0&&(h(!1),v.error("Request timed out! Please try again later."),u(!1)),()=>clearInterval(p)},[d,l]);const b=async p=>{p.preventDefault();try{const x="http://localhost:5001",w=G();u(!0),(await A.post(`${x}/api/createRoom`,{id:w,owner:o})).data.success?(r(w),a("Owner"),v.success("Created a new room"),t(`/editor/${w}`,{state:{username:"Owner",isOwner:!0}})):v.error("Failed to create room")}catch(x){v.error("Error creating room"),console.error(x)}finally{u(!1)}},m=async()=>{if(!s||!o){v.error("ROOM ID & username are required");return}try{u(!0);let p;try{p=await A.get(`http://localhost:5001/api/checkUserRole?roomId=${s}&username=${o}`,{withCredentials:!0})}catch(w){v.error("Error verifying user role. Please try again."),console.error("Error in checkUserRole:",w),u(!1);return}if(console.log("User role check response:",p.data),p.data.role==="owner"||p.data.role==="approved"){v.success("Access granted! Redirecting..."),t(`/editor/${s}`,{state:{username:o}});return}h(!0),i(120);let x;try{x=await A.post("http://localhost:5001/api/requestAccess",{roomId:s,username:o},{withCredentials:!0})}catch(w){v.error("Access Denied !"),console.error("Error in requestAccess:",w),u(!1),h(!1);return}if(console.log("Requesting access..."),console.log("API Response:",x.data),x.data.success){v.success("Access request sent to the room owner");let w=!1,D=0;const O=41;for(;!w&&D<O;){await new Promise(T=>setTimeout(T,3e3)),D++;let F;try{F=await A.get(`http://localhost:5001/api/check-access?roomId=${s}&username=${o}`,{withCredentials:!0})}catch(T){v.error("Error checking access status."),console.error("Error in check-access:",T),u(!1),h(!1);return}if(console.log("Access status response:",F.data),F.data.status==="approved"){w=!0,v.success("Access approved! Redirecting..."),u(!1),h(!1),t(`/editor/${s}`,{state:{username:o}});return}else if(F.data.status==="denied"){v.error("Access denied!"),u(!1),h(!1);return}}w||v.error("Request timed out! Please try again later.")}else v.error(x.data.message||"Failed to request access")}catch(p){v.error("Unexpected error occurred."),console.error(p)}finally{u(!1)}},f=async()=>{try{(await A.post("http://localhost:5001/api/logout",{},{withCredentials:!0})).data.success?v.success("Logged out successfully!"):v.error("Logout failed!")}catch(p){v.error("Logout failed!"),console.error("Logout error:",p)}finally{t("/"),sessionStorage.clear(),localStorage.clear()}};return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-r from-gray-900 via-black to-gray-900 text-white relative overflow-hidden px-4",children:[e.jsx(R.div,{className:"absolute top-4 right-4 z-20",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx("button",{onClick:f,disabled:c,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md transition-colors duration-200 text-sm font-medium shadow-lg disabled:bg-gray-600 disabled:cursor-not-allowed",children:"Logout"})}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute w-80 h-80 md:w-96 md:h-96 bg-blue-500 opacity-30 rounded-full filter blur-3xl top-10 left-5 md:top-20 md:left-10 animate-pulse"}),e.jsx("div",{className:"absolute w-64 h-64 md:w-80 md:h-80 bg-purple-500 opacity-30 rounded-full filter blur-3xl bottom-5 right-10 md:bottom-10 md:right-20 animate-pulse"})]}),e.jsxs(R.div,{className:"bg-gray-950 p-6 md:p-8 rounded-2xl shadow-2xl w-full max-w-md text-center z-10 border border-gray-700",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[e.jsx("img",{className:"w-20 md:w-24 mx-auto mb-4",src:"Logo.PNG",alt:"logo"}),e.jsx("h4",{className:"text-xl md:text-2xl font-semibold mb-6 text-blue-400",children:"Enter ROOM ID to Join"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",className:"w-full p-2 md:p-3 border border-gray-700 rounded-md bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"ROOM ID",onChange:p=>r(p.target.value),value:s,disabled:c}),e.jsx("input",{type:"text",className:"w-full p-2 md:p-3 border border-gray-700 rounded-md bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"USERNAME",onChange:p=>a(p.target.value),value:o,disabled:c}),e.jsx(R.button,{className:"w-full bg-blue-500 text-white p-2 md:p-3 rounded-md font-semibold hover:bg-blue-400 transition-all shadow-md disabled:bg-gray-600",onClick:m,disabled:c,whileHover:{scale:1.05},whileTap:{scale:.95},children:c?"Processing...":"Request to Join"}),d&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("p",{className:"text-xs md:text-sm text-gray-400 font-semibold",children:["Request expires in ",Math.floor(l/60),":",(l%60).toString().padStart(2,"0")," minutes"]}),e.jsx("div",{className:"relative w-full h-2 bg-gray-700 rounded-full overflow-hidden mt-2",children:e.jsx("div",{className:"absolute left-0 top-0 h-full bg-blue-500",style:{width:`${l/120*100}%`}})})]}),e.jsxs("span",{className:"block text-xs md:text-sm text-gray-400 mt-4",children:["Don't have an invite? Â ",e.jsx("a",{onClick:b,href:"#",className:"text-blue-400 hover:underline cursor-pointer",children:"Create a new room"})]})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-20 md:h-32 bg-gradient-to-t from-gray-900 via-black to-transparent"}),e.jsx("footer",{className:"absolute bottom-4 md:bottom-5 text-gray-400 text-xs md:text-sm z-10",children:e.jsx("p",{children:"Â© 2025 CodeIt. All rights reserved."})})]})},Ir=()=>{const t=q(),[s,r]=n.useState(!1);return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-r from-gray-900 via-black to-gray-900 text-white relative overflow-hidden px-4",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute w-64 h-64 md:w-96 md:h-96 bg-blue-500 opacity-20 rounded-full filter blur-3xl top-10 left-5 md:top-20 md:left-10 animate-float"}),e.jsx("div",{className:"absolute w-56 h-56 md:w-80 md:h-80 bg-purple-500 opacity-20 rounded-full filter blur-3xl bottom-5 right-8 md:bottom-10 md:right-20 animate-float-delay"})]}),e.jsxs("header",{className:"absolute top-0 w-full px-6 py-4 flex justify-between items-center max-w-6xl mx-auto z-10",children:[e.jsx(R.img,{src:"Logo.PNG",alt:"CodeIt Logo",className:"h-12 md:h-14 cursor-pointer",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.8}}),e.jsxs("nav",{className:"hidden md:flex space-x-4",children:[e.jsx(R.button,{className:"px-6 py-2 text-lg font-semibold bg-white bg-opacity-10 backdrop-blur-md text-white rounded-lg shadow-lg hover:bg-opacity-20 transition-all border border-white border-opacity-20",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/login"),children:"Login"}),e.jsx(R.button,{className:"px-6 py-2 text-lg font-semibold bg-blue-600 bg-opacity-90 backdrop-blur-md text-white rounded-lg shadow-lg hover:bg-blue-500 transition-all border border-blue-500 border-opacity-20",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/signup"),children:"Sign Up"})]}),e.jsx("div",{className:"md:hidden",children:e.jsx("button",{onClick:()=>r(!s),className:"text-white focus:outline-none",children:e.jsx(R.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},children:s?e.jsx("span",{className:"text-2xl",children:"âœ–"}):e.jsx("span",{className:"text-2xl",children:"â˜°"})})})})]}),s&&e.jsxs(R.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"absolute top-16 right-6 bg-gray-800 bg-opacity-90 backdrop-blur-md p-4 rounded-lg shadow-lg flex flex-col space-y-3 md:hidden z-50 border border-gray-700",children:[e.jsx(R.button,{className:"px-6 py-2 text-lg font-semibold bg-white bg-opacity-10 backdrop-blur-md text-white rounded-lg shadow-lg hover:bg-opacity-20 transition-all border border-white border-opacity-20",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/login"),children:"Login"}),e.jsx(R.button,{className:"px-6 py-2 text-lg font-semibold bg-blue-600 bg-opacity-90 backdrop-blur-md text-white rounded-lg shadow-lg hover:bg-blue-500 transition-all border border-blue-500 border-opacity-20",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/signup"),children:"Sign Up"})]}),e.jsxs(R.div,{className:"text-center px-4 md:px-6 z-10",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:1},children:[e.jsxs("h2",{className:"text-4xl md:text-6xl font-extrabold leading-tight tracking-wide bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400",children:["The Future of"," ",e.jsx("span",{className:"text-blue-400",children:"Collaborative Coding"})]}),e.jsx("p",{className:"mt-3 md:mt-4 text-lg md:text-xl text-gray-300 max-w-xl md:max-w-2xl mx-auto",children:"Code together in real-time with seamless chat, audio, and video. Join rooms and sync instantly with teammates."}),e.jsxs("div",{className:"mt-6 md:mt-8 flex flex-col md:flex-row justify-center gap-4",children:[e.jsx(R.button,{className:"px-6 md:px-8 py-3 bg-blue-500 bg-opacity-90 backdrop-blur-md text-white text-lg font-semibold rounded-lg shadow-lg hover:bg-blue-400 transition-all border border-blue-400 border-opacity-20",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/signup"),children:"Get Started ðŸš€"}),e.jsx(R.button,{className:"px-6 md:px-8 py-3 bg-white bg-opacity-10 backdrop-blur-md text-white text-lg font-semibold rounded-lg shadow-lg hover:bg-opacity-20 transition-all border border-white border-opacity-20",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/login"),children:"Login ðŸ”¥"})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-20 md:h-32 bg-gradient-to-t from-gray-900 via-black to-transparent"}),e.jsx("footer",{className:"absolute bottom-4 md:bottom-5 text-gray-400 text-xs md:text-sm z-10",children:e.jsx("p",{children:"Â© 2025 CodeIt. All rights reserved."})})]})},Rr="/assets/GoogleLogo-DjEGDao7.png",Lr=()=>{const t=q(),[s,r]=n.useState(""),[o,a]=n.useState(""),[c,u]=n.useState(!1),[l,i]=n.useState(!1),d=async()=>{var m,f;if(!s||!o){v.error("All fields are required!");return}i(!0);try{const x=await A.post("http://localhost:5001/api/login",{email:s,password:o});x.data.success?(localStorage.setItem("token",x.data.token),v.success("Logged In Successfully!"),t("/dashboard")):v.error(x.data.message)}catch(p){A.isAxiosError(p)&&v.error(((f=(m=p.response)==null?void 0:m.data)==null?void 0:f.message)||"Login failed!")}finally{i(!1)}},h=m=>{m.code==="Enter"&&d()},b=Xe({onSuccess:async m=>{try{const f=await A.post("http://localhost:5001/api/auth/google",{token:m.access_token});f.data.success?(localStorage.setItem("token",f.data.token),v.success("Logged in with Google!"),t("/dashboard")):v.error("Google login failed!")}catch{v.error("Google Authentication Error!")}},onError:()=>v.error("Google Sign-In Failed!")});return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-r from-gray-900 via-black to-gray-900 text-white relative overflow-hidden px-4",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute w-64 h-64 md:w-96 md:h-96 bg-blue-500 opacity-30 rounded-full filter blur-3xl top-20 left-4 md:left-10 animate-pulse"}),e.jsx("div",{className:"absolute w-56 h-56 md:w-80 md:h-80 bg-purple-500 opacity-30 rounded-full filter blur-3xl bottom-10 right-4 md:right-20 animate-pulse"})]}),e.jsxs(R.div,{className:"bg-gray-950 p-6 md:p-8 rounded-2xl shadow-2xl w-full max-w-md md:w-96 text-center z-10 border border-gray-700",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[e.jsx("img",{className:"w-20 md:w-24 mx-auto mb-4",src:"Logo.PNG",alt:"App Logo"}),e.jsx("h4",{className:"text-xl md:text-2xl font-semibold mb-6 text-blue-400",children:"Login to Your Account"}),e.jsxs("div",{className:"space-y-4 md:space-y-5",children:[e.jsx("input",{type:"email",className:"w-full p-2 md:p-3 text-sm md:text-base border border-gray-700 rounded-md bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Enter Your Email",onChange:m=>r(m.target.value),value:s,onKeyUp:h}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:c?"text":"password",className:"w-full p-2 md:p-3 text-sm md:text-base border border-gray-700 rounded-md bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Enter Your Password",onChange:m=>a(m.target.value),value:o,onKeyUp:h}),e.jsx("span",{onClick:()=>u(!c),className:"absolute right-3 top-2.5 md:top-3 cursor-pointer text-gray-400",children:c?e.jsx(ae,{size:18}):e.jsx(ie,{size:18})})]}),e.jsx(R.button,{className:"w-full bg-blue-500 text-white p-2 md:p-3 rounded-md text-sm md:text-base font-semibold hover:bg-blue-400 transition-all shadow-md disabled:bg-gray-600",onClick:d,disabled:l,whileHover:{scale:1.05},whileTap:{scale:.95},children:l?"Logging in...":"Log In"}),e.jsxs(R.button,{className:"w-full flex items-center justify-center gap-2 bg-white text-black p-2 md:p-3 rounded-md text-sm md:text-base font-semibold shadow-md hover:bg-gray-200 transition-all border border-gray-300 mt-2",onClick:()=>b(),whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("img",{src:Rr,alt:"Google Logo",className:"w-4 h-4 md:w-5 md:h-5"}),e.jsx("span",{children:"Continue with Google"})]}),e.jsxs("p",{className:"text-xs md:text-sm text-gray-400 mt-2",children:["Forgot Password?"," ",e.jsx("a",{href:"/forgot-password",className:"text-blue-400 hover:underline hover:text-blue-300",children:"Click Here"})]}),e.jsxs("p",{className:"text-xs md:text-sm text-gray-400",children:["Don't have an account?"," ",e.jsx("a",{href:"/signup",className:"text-blue-400 hover:underline hover:text-blue-300",children:"Sign Up"})]})]})]}),e.jsx("footer",{className:"absolute bottom-4 md:bottom-5 text-gray-400 text-xs md:text-sm z-10 text-center",children:e.jsx("p",{children:"Â© 2025 CodeIt. All rights reserved."})})]})};function Tr(){const[t,s]=n.useState(1),[r,o]=n.useState({username:"",email:"",password:"",confirmPassword:""}),[a,c]=n.useState(""),[u,l]=n.useState(""),[i,d]=n.useState(!1),[h,b]=n.useState(!1),[m,f]=n.useState(!1),[p,x]=n.useState(300),w=q();n.useEffect(()=>{let L;return t===2&&p>0&&(L=setInterval(()=>{x(J=>J-1)},1e3)),()=>clearInterval(L)},[t,p]);const D=L=>{const J=Math.floor(L/60),X=L%60;return`${J}:${X.toString().padStart(2,"0")}`},O=L=>{const{name:J,value:X}=L.target;o({...r,[J]:X})},F=L=>{c(L.target.value)},T=async()=>{d(!0);try{const L=await A.post("http://localhost:5001/api/sendotp",{email:r.email});if(L.data.success)x(300),v.success("New OTP sent to your email!");else throw new Error(L.data.message||"Failed to resend OTP.")}catch{l("Failed to resend OTP. Please try again."),v.error("Failed to resend OTP.")}finally{d(!1)}},U=async()=>{console.log("Sending OTP..."),console.log("http://localhost:5001/api/sendotp"),d(!0);try{if(!r.username||!r.email||!r.password||!r.confirmPassword){l("All fields are required.");return}if(r.password!==r.confirmPassword){l("Passwords do not match.");return}const L=await A.post("http://localhost:5001/api/sendotp",{email:r.email});if(L.data.success)s(2),l(""),v.success("OTP sent to your email!");else throw new Error(L.data.message||"Failed to send OTP.")}catch{l("Something went wrong. Please try again."),v.error("Failed to send OTP.")}finally{d(!1)}},W=async()=>{console.log("Signing Up..."),d(!0);try{if(!a){l("OTP is required.");return}const L=await A.post("http://localhost:5001/api/signup",{...r,otp:a});if(console.log(L.data),L.data.success)v.success("Sign up successful!"),w("/login");else throw new Error(L.data.message||"Failed to create user.")}catch{l("Something went wrong. Please try again."),v.error("Failed to create user.")}finally{d(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-950 text-white relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute w-60 h-60 bg-blue-500 opacity-20 rounded-full filter blur-3xl top-20 left-10 animate-pulse"}),e.jsx("div",{className:"absolute w-48 h-48 bg-purple-500 opacity-20 rounded-full filter blur-3xl bottom-10 right-20 animate-bounce"})]}),e.jsxs(R.div,{className:"w-full max-w-md bg-gray-900 bg-opacity-80 backdrop-blur-lg border border-gray-700 rounded-lg shadow-2xl p-8 z-10",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:1},children:[e.jsx("h2",{className:"text-3xl font-extrabold text-center bg-clip-text text-transparent bg-gradient-to-r from-green-400 to-purple-500 mb-6",children:t===1?"Sign Up ðŸš€":"Verify OTP ðŸ”¥"}),u&&e.jsx("div",{className:"mb-4 p-3 bg-red-500 bg-opacity-20 text-red-300 rounded-lg text-sm",children:u}),t===1?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-400 mb-2",children:"Username"}),e.jsx("input",{type:"text",id:"username",name:"username",value:r.username,onChange:O,className:"w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Enter your username",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400 mb-2",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:O,className:"w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{className:"mb-6 relative",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-400 mb-2",children:"Password"}),e.jsx("input",{type:h?"text":"password",id:"password",name:"password",value:r.password,onChange:O,className:"w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Enter your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>b(!h),className:"absolute right-3 top-10 text-gray-400 hover:text-white transition-colors",children:h?e.jsx(ae,{size:20}):e.jsx(ie,{size:20})})]}),e.jsxs("div",{className:"mb-6 relative",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-400 mb-2",children:"Confirm Password"}),e.jsx("input",{type:m?"text":"password",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword,onChange:O,className:"w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Confirm your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>f(!m),className:"absolute right-3 top-10 text-gray-400 hover:text-white transition-colors",children:m?e.jsx(ae,{size:20}):e.jsx(ie,{size:20})})]}),e.jsx(R.button,{type:"button",onClick:U,className:"w-full px-6 py-3 bg-green-500 text-white text-lg font-semibold rounded-lg shadow-lg hover:bg-green-400 transition-all border border-green-400 flex items-center justify-center",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:i,children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-2 border-t-transparent rounded-full animate-spin mr-2"}),"Sending OTP..."]}):"Next"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-400 mb-2",children:"Enter OTP"}),e.jsx("input",{type:"text",id:"otp",value:a,onChange:F,className:"w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Enter OTP sent to your email",required:!0})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["OTP expires in:"," ",e.jsx("span",{className:"font-semibold text-green-400",children:D(p)})]}),e.jsx("button",{type:"button",onClick:T,className:"text-sm text-green-400 hover:text-green-300 font-semibold",children:i?"Sending...":"Resend OTP"})]}),e.jsx(R.button,{type:"button",onClick:W,className:"w-full px-6 py-3 bg-green-500 text-white text-lg font-semibold rounded-lg shadow-lg hover:bg-green-400 transition-all border border-green-400 flex items-center justify-center",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:i,children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-2 border-t-transparent rounded-full animate-spin mr-2"}),"Signing Up..."]}):"Sign Up"})]}),e.jsxs("p",{className:"mt-6 text-center text-gray-400",children:["Already have an account?"," ",e.jsx("button",{onClick:()=>w("/login"),className:"text-green-400 hover:text-green-300 font-semibold",children:"Login"})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-24 md:h-32 bg-gradient-to-t from-gray-950 via-black to-transparent"}),e.jsx("footer",{className:"absolute bottom-2 text-gray-400 text-xs md:text-sm z-10",children:e.jsx("p",{children:"Â© 2025 CodeIt. All rights reserved."})})]})}A.defaults.withCredentials=!0;const Pr=()=>{const[t]=Je(),s=q(),[r,o]=n.useState(!0),[a,c]=n.useState("");return n.useEffect(()=>{(async()=>{const l=t.get("roomId"),i=t.get("email"),d=t.get("approve")==="true";if(!l||!i){c("Invalid request. Missing parameters."),o(!1);return}try{const b=await A.post("http://localhost:5001/api/approveAccess",{roomId:l,email:i,isApproved:d},{withCredentials:!0});b.data.success?(v.success(`User ${d?"approved":"denied"} successfully!`),c(`User ${d?"approved":"denied"} successfully.`)):(v.error(b.data.message),c("Failed to process request."))}catch(h){console.error(h),c("An error occurred while processing the request.")}finally{o(!1)}})()},[t,s]),e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100",children:e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md text-center",children:e.jsx("h2",{className:"text-xl text-black font-semibold",children:r?"Processing...":a})})})};function Ar(){const[t,s]=n.useState(""),[r,o]=n.useState(!1),[a,c]=n.useState(""),u=q(),l=async i=>{i.preventDefault(),o(!0),c("");try{if(!t){c("Email is required.");return}const d=await A.post("http://localhost:5001/api/reset-password-token",{email:t});if(d.data.success)v.success("Password reset link sent to your email!");else throw new Error(d.data.message||"Failed to send reset link.")}catch{c("Something went wrong. Please try again."),v.error("Failed to send reset link.")}finally{o(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-950 text-white relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute w-60 h-60 bg-blue-500 opacity-20 rounded-full filter blur-3xl top-20 left-10 animate-pulse"}),e.jsx("div",{className:"absolute w-48 h-48 bg-purple-500 opacity-20 rounded-full filter blur-3xl bottom-10 right-20 animate-bounce"})]}),e.jsxs(R.div,{className:"w-full max-w-md bg-gray-900 bg-opacity-80 backdrop-blur-lg border border-gray-700 rounded-lg shadow-2xl p-8 z-10",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:1},children:[e.jsx("h2",{className:"text-3xl font-extrabold text-center bg-clip-text text-blue-400 mb-6",children:"Forgot Password ðŸ”‘"}),a&&e.jsx("div",{className:"mb-4 p-3 bg-red-500 bg-opacity-20 text-red-300 rounded-lg text-sm",children:a}),e.jsxs("form",{onSubmit:l,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400 mb-2",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:t,onChange:i=>s(i.target.value),className:"w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Enter your email",required:!0})]}),e.jsx(R.button,{type:"submit",className:"w-full px-6 py-3 bg-blue-500 text-white text-lg font-semibold rounded-lg shadow-lg hover:bg-green-400 transition-all border border-green-400 flex items-center justify-center",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:r,children:r?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-2 border-t-transparent rounded-full animate-spin mr-2"}),"Sending..."]}):"Send Reset Link"})]}),e.jsxs("p",{className:"mt-6 text-center text-gray-400",children:["Remember your password?"," ",e.jsx("button",{onClick:()=>u("/login"),className:"text-blue-400 font-semibold",children:"Login"})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-24 md:h-32 bg-gradient-to-t from-gray-950 via-black to-transparent"}),e.jsx("footer",{className:"absolute bottom-2 text-gray-400 text-xs md:text-sm z-10",children:e.jsx("p",{children:"Â© 2025 CodeIt. All rights reserved."})})]})}function Or(){const[t,s]=n.useState(""),[r,o]=n.useState(""),[a,c]=n.useState(!1),[u,l]=n.useState(""),i=q(),h=Ie().pathname.split("/").at(-1),b=async m=>{m.preventDefault(),c(!0),l("");try{if(!t||!r){l("All fields are required.");return}if(t!==r){l("Passwords do not match.");return}if(!/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(t)){l("Password must be at least 8 characters long, include uppercase & lowercase letters, a number, and a special character.");return}const f=await A.post("http://localhost:5001/api/reset-password",{password:t,confirmPassword:r,token:h});if(f.data.success)v.success("Password updated successfully!"),i("/login");else throw new Error(f.data.message||"Failed to update password.")}catch{l("Something went wrong. Please try again."),v.error("Failed to update password.")}finally{c(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-950 text-white relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute w-60 h-60 bg-blue-500 opacity-20 rounded-full filter blur-3xl top-20 left-10 animate-pulse"}),e.jsx("div",{className:"absolute w-48 h-48 bg-purple-500 opacity-20 rounded-full filter blur-3xl bottom-10 right-20 animate-bounce"})]}),e.jsxs(R.div,{className:"w-full max-w-md bg-gray-900 bg-opacity-80 backdrop-blur-lg border border-gray-700 rounded-lg shadow-2xl p-8 z-10",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:1},children:[e.jsx("h2",{className:"text-3xl font-extrabold text-center bg-clip-text text-blue-400 mb-6",children:"Update Password ðŸ”‘"}),u&&e.jsx("div",{className:"mb-4 p-3 bg-red-500 bg-opacity-20 text-red-300 rounded-lg text-sm",children:u}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-400 mb-2",children:"New Password"}),e.jsx("input",{type:"password",id:"password",value:t,onChange:m=>s(m.target.value),className:"w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Enter your new password",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-400 mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",value:r,onChange:m=>o(m.target.value),className:"w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Confirm your new password",required:!0})]}),e.jsx(R.button,{type:"submit",className:"w-full px-6 py-3 bg-blue-500 text-white text-lg font-semibold rounded-lg shadow-lg hover:bg-green-400 transition-all border border-green-400 flex items-center justify-center",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:a,children:a?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-2 border-t-transparent rounded-full animate-spin mr-2"}),"Updating..."]}):"Update Password"})]}),e.jsxs("p",{className:"mt-6 text-center text-gray-400",children:["Remember your password?"," ",e.jsx("button",{onClick:()=>i("/login"),className:"text-blue-400 hover:text-blue-300 font-semibold",children:"Login"})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-24 md:h-32 bg-gradient-to-t from-gray-950 via-black to-transparent"}),e.jsx("footer",{className:"absolute bottom-2 text-gray-400 text-xs md:text-sm z-10",children:e.jsx("p",{children:"Â© 2025 CodeIt. All rights reserved."})})]})}const Fr="509504590882-7503kgca320ih25svukd7u0s9gpphg8d.apps.googleusercontent.com";function Ur(){return e.jsxs(Qe,{clientId:Fr,children:[e.jsx(Ke,{position:"top-right",reverseOrder:!1}),e.jsx(Ve,{children:e.jsxs(Ss,{children:[e.jsx(V,{path:"/",element:e.jsx(Ir,{})}),e.jsx(V,{path:"/login",element:e.jsx(Lr,{})}),e.jsx(V,{path:"/signup",element:e.jsx(Tr,{})}),e.jsx(V,{path:"/dashboard",element:e.jsx(Dr,{})}),e.jsx(V,{path:"/editor/:roomId",element:e.jsx(kr,{})}),e.jsx(V,{path:"/approve-access",element:e.jsx(Pr,{})}),e.jsx(V,{path:"/forgot-password",element:e.jsx(Ar,{})}),e.jsx(V,{path:"/update-password/:id",element:e.jsx(Or,{})})]})})]})}function zr({children:t}){return e.jsx(As,{children:e.jsx(Fs,{children:e.jsx(or,{children:e.jsx(ur,{children:e.jsx(Vs,{children:e.jsx(Bs,{children:e.jsx(sr,{children:e.jsx(Us,{children:t})})})})})})})})}We.createRoot(document.getElementById("root")).render(e.jsx(zr,{children:e.jsx(Ur,{})}));
